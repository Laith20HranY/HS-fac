<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!--Link With CSS-->
    <title>Reset Password</title>
    <link rel='stylesheet' href='c1.css'>
    <link rel="stylesheet" href="assets/css/style.css">

    <link href="assets/img/Hs logosmal.PNG" rel="icon">
    <link href="assets/img/HS logog.gif" rel="apple-touch-icon">
</head>
<body class="body">
    <div class="center">   
        <h1 style="color: #ffc451;">Reset Password</h1>
        <form id="resetPasswordForm" method="post" action="/reset-password" class="php-email-form">
            <div class="txt_field">
                <input type="number" name="employee_id" required>
                <span></span>
                <label>Employee ID</label>
            </div>       
            <div class="txt_field">
                <input type="password" name="new_password" required>
                <span></span>
                <label>New Password</label>
            </div>
            <div class="txt_field">
                <input type="password" name="confirm_password" required>
                <span></span>
                <label>Re-Password</label>
            </div>  
            <input type="submit" value="Send">
            <div class="signup_link">
                Cancel Change? <a href="h2.html">Home</a>
            </div>
        </form>
        <div id="messageBox"></div>
    </div>
    
    <script>
        document.getElementById('resetPasswordForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            
            const formData = {
                employee_id: this.employee_id.value,
                new_password: this.new_password.value,
                confirm_password: this.confirm_password.value
            };
            
            const response = await fetch('/reset-password', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });
            
            const result = await response.json();
            document.getElementById('messageBox').innerText = result.message;
        });
    </script>
</body>
</html>
